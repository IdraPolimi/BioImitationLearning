% function to learn a DCP in batch mode using a minimum jerk trajectory as% templatefunction [Y,Ft]=learn_dcp_batch_oa(ID,dt,goal,tau,n_rfs,init,traj,Tp,len)global dcps;% initialize DMPdcp('clear',ID);dcp('init',ID,n_rfs,'minJerk_dcp',0);% initialize some variables for plottingZ=zeros(floor(len+1),2);X=Z;V=Z;Y=zeros(floor(len+1),3);T=Y;PSI=zeros(floor(len+1),n_rfs);W=PSI;% generate the minimum jerk trajectoryt=init;td=0;tdd=0;% generating T, Td, Tddfor i=1:len    T(i,1)=traj(i);    T(i,2)=(traj(i+1)-traj(i))/dt;endT(i+1,1)=traj(i+1);T(i+1,2)=(traj(i+2)-T(i+1,1))/dt;tmp=(traj(i+3)-traj(i+2))/dt;for i=1:len-1    T(i,3)=(T(i+1,2)-T(i,2))/dt;endT(i+1,3)=(tmp-T(i+1,2))/dt;% use the in-built function to initialize the dcp with minjerkdcp('Batch_Fit',ID,tau,dt,T(:,1),T(:,2),T(:,3));W   = dcps(ID).w';%Ft=dcps(ID).Ft;% test the fitdcp('reset_state',ID, T(1,1));dcp('set_goal',ID,T(end,1)+goal,1);for i=0:len,  [y,yd,ydd]=dcp('run',ID,tau,dt);    Z(i+1,:)   = [dcps(ID).z dcps(ID).zd];  Y(i+1,:)   = [y yd ydd];  X(i+1,:)   = [dcps(ID).x dcps(ID).xd];  V(i+1,:)   = [dcps(ID).v dcps(ID).vd];  PSI(i+1,:) = dcps(ID).psi';  W(i+1,:)   = dcps(ID).w';  %F(i+1)   = dcps(ID).f;  end;  